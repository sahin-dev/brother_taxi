generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}


model User {
  id             String          @id @default(auto()) @map("_id") @db.ObjectId
  phone          String          @unique      
  name           String?
  about           String?
  otp             String?
  otpExpiresIn    DateTime?
  googleId        String?
  appleId          String?

  email          String?
  avatar         String          @default("https://app.boom360trader.com/uploads/user.png")
  fcmToken       String?
  subcription    Boolean?        @default(false)
  role         UserRole
  accessToken    String?
  customerId     String?
  priceId        String?
  subscriptionId String?
  profileCompleted  Boolean @default(false)
  roleId         String?


  userRide          Ride[]  @relation("riderRelation")
  driverRide        Ride[]  @relation("driverRelation")


  createdAt      DateTime        @default(now())
  updatedAt      DateTime        @updatedAt


  @@map("users")
}

model Ride {
  id        String      @id @db.ObjectId  @default(auto()) @map("_id")
  rider_id   String      @db.ObjectId
  driver_id  String     @db.ObjectId
  status      RideStatus    @default(Pending)
  start       Cords
  end         Cords


  rider     User    @relation(name: "riderRelation",fields: [rider_id], references: [id])
  driver    User    @relation(name: "driverRelation",fields: [driver_id], references: [id])

}

enum Cords {
  lat 
  long
}

enum UserRole {

  Rider
  Driver
}

enum RideStatus {
  Pending
  Ongoing
  Completed
  Cancel
}